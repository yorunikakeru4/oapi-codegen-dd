// Code generated by oapi-codegen. DO NOT EDIT.

package xjsonschema

import (
	"github.com/yorunikakeru4/oapi-codegen-dd/v3/pkg/runtime"
	"github.com/go-playground/validator/v10"
)

type User struct {
	// ID User ID
	ID int64 `json:"id" jsonschema:"type=integer,minimum=1" validate:"required"`

	// Email User email address
	Email runtime.Email `json:"email" jsonschema:"type=string,format=email,pattern=^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" validate:"required"`

	// Username Username
	Username string `json:"username" jsonschema:"type=string,minLength=3,maxLength=20" validate:"required,max=20,min=3"`

	// Age User age
	Age *int `json:"age,omitempty" jsonschema:"type=integer,minimum=0,maximum=150" validate:"omitempty,gte=0,lte=150"`

	// Website User website URL
	Website *string `json:"website,omitempty" jsonschema:"type=string,format=uri"`

	// IsActive Whether the user account is active
	IsActive *bool `json:"isActive,omitempty" jsonschema:"type=boolean"`
}

func (u User) Validate() error {
	var errors runtime.ValidationErrors
	if err := typesValidator.Var(u.ID, "required"); err != nil {
		errors = errors.Append("ID", err)
	}
	if v, ok := any(u.Email).(runtime.Validator); ok {
		if err := v.Validate(); err != nil {
			errors = errors.Append("Email", err)
		}
	}
	if err := typesValidator.Var(u.Username, "required,max=20,min=3"); err != nil {
		errors = errors.Append("Username", err)
	}
	if u.Age != nil {
		if err := typesValidator.Var(u.Age, "omitempty,gte=0,lte=150"); err != nil {
			errors = errors.Append("Age", err)
		}
	}
	if len(errors) == 0 {
		return nil
	}
	return errors
}

type Product struct {
	// Name Product name
	Name string `json:"name" jsonschema:"type=string,required" validate:"required"`

	// Price Product price
	Price float32 `json:"price" jsonschema:"type=number,minimum=0,exclusiveMinimum=false" validate:"required,gte=0"`

	// Tags Product tags
	Tags []string `json:"tags,omitempty" jsonschema:"type=array"`
}

func (p Product) Validate() error {
	return runtime.ConvertValidatorError(typesValidator.Struct(p))
}

var typesValidator *validator.Validate

func init() {
	typesValidator = validator.New(validator.WithRequiredStructEnabled())
	runtime.RegisterCustomTypeFunc(typesValidator)
}
